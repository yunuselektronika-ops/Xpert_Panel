# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Ä–µ–π—Ç–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

Xpert Panel —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—É–º–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–µ–π—Ç–∏–Ω–≥–∞** - –≤ –ø–æ–¥–ø–∏—Å–∫—É –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10 –ª—É—á—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç —Å–≤–æ–µ–π –æ—á–µ—Ä–µ–¥–∏.

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### **1. –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ (Score 0-100)**
- **Success Rate** (40 –±–∞–ª–ª–æ–≤) - –ø—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–∏–Ω–≥–æ–≤
- **Average Ping** (35 –±–∞–ª–ª–æ–≤) - —Å—Ä–µ–¥–Ω–∏–π –ø–∏–Ω–≥ (–º–µ–Ω—å—à–µ = –ª—É—á—à–µ)
- **Unique Users** (25 –±–∞–ª–ª–æ–≤) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–±–æ–ª—å—à–µ = –Ω–∞–¥–µ–∂–Ω–µ–µ)
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** - –µ—Å–ª–∏ –Ω–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –æ—á–µ—Ä–µ–¥—å**
- **–¢–æ–ø-N —Å–µ—Ä–≤–µ—Ä–æ–≤** –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ø–æ–¥–ø–∏—Å–∫—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
- **–û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã** –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Ä–µ–π—Ç–∏–Ω–≥ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

### **3. –î–≤–æ–π–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
1. **Health Filter** - —Ç–æ–ª—å–∫–æ –∑–¥–æ—Ä–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã (‚â•70% success, ‚â§1000ms ping)
2. **Top Filter** - —Ç–æ–ª—å–∫–æ —Ç–æ–ø-N —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É

## üõ† API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–æ–º

### **GET /api/xpert/top-configs?limit=10**
–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–ø-N —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º:

```json
{
  "configs": [
    {
      "id": 1,
      "server": "example.com",
      "port": 443,
      "protocol": "vless",
      "ping_ms": 145.2,
      "score": 87.5,
      "health": {
        "healthy": true,
        "avg_ping": 145.2,
        "success_rate": 85.5,
        "unique_users": 8
      }
    }
  ],
  "total": 10
}
```

### **GET /api/xpert/queue-configs**
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏:

```json
{
  "configs": [...],
  "total": 25
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–ø —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –ø–æ–¥–ø–∏—Å–∫–µ
XPERT_TOP_SERVERS_LIMIT=10

# –í–∫–ª—é—á–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
XPERT_USE_DYNAMIC_FILTERING=true

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
XPERT_MIN_USERS_FOR_STATS=3
```

## üîÑ –†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞

### **–ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
```
Score = Success Rate * 0.4 + Ping Score * 0.35 + Users Score * 0.25

Success Rate: 85% ‚Üí 34 –±–∞–ª–ª–∞ (85 * 0.4)
Ping Score: 150ms ‚Üí 32.5 –±–∞–ª–ª–∞ ((1000-150)/1000 * 35)
Users Score: 8 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí 20 –±–∞–ª–ª–æ–≤ (min(8, 25))
Total Score: 86.5 –±–∞–ª–ª–æ–≤
```

### **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
```
Score = Ping Score * 0.5 + Loss Score * 0.3 + Active Bonus * 0.2

Ping Score: 150ms ‚Üí 42.5 –±–∞–ª–ª–∞ ((1000-150)/1000 * 50)
Loss Score: 5% ‚Üí 28.5 –±–∞–ª–ª–æ–≤ ((100-5)/100 * 30)
Active Bonus: 20 –±–∞–ª–ª–æ–≤
Total Score: 91 –±–∞–ª–ª
```

## üìä Workflow

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è** - –æ—Ç—Å–µ–∏–≤–∞–µ–º –Ω–µ—Ä–∞–±–æ—á–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
2. **–†–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞** - –æ—Ü–µ–Ω–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä
3. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞** - –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Ä–µ–π—Ç–∏–Ω–≥–∞
4. **–û—Ç–±–æ—Ä —Ç–æ–ø-N** - –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏
5. **–û—á–µ—Ä–µ–¥—å** - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∂–¥—É—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–¢–æ–ª—å–∫–æ –ª—É—á—à–∏–µ** - –≤ –ø–æ–¥–ø–∏—Å–∫–µ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ø —Å–µ—Ä–≤–µ—Ä—ã  
‚úÖ **–ú–æ—Ç–∏–≤–∞—Ü–∏—è** - —Å–µ—Ä–≤–µ—Ä—ã –±–æ—Ä—é—Ç—Å—è –∑–∞ –º–µ—Å—Ç–æ –≤ —Ç–æ–ø–µ  
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - —Ä–µ–π—Ç–∏–Ω–≥ –º–µ–Ω—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤  

## ÔøΩ –ö–∞–∫ —Å–µ—Ä–≤–µ—Ä –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–æ–ø

### **–ü—É—Ç–∏ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:**
1. **–£–ª—É—á—à–∏—Ç—å –ø–∏–Ω–≥** - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
2. **–ü–æ–≤—ã—Å–∏—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
3. **–ü—Ä–∏–≤–ª–µ—á—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –±–æ–ª—å—à–µ –ø–∏–Ω–≥–æ–≤ = —Ç–æ—á–Ω–µ–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### **–ü—Ä–∏—á–∏–Ω—ã –ø–∞–¥–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞:**
1. **–í—ã—Å–æ–∫–∏–π –ø–∏–Ω–≥** - –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. **–ü–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤** - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
3. **–ú–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
```bash
curl https://your-domain.com/api/xpert/ping-stats
```

### **–†–µ–π—Ç–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
curl https://your-domain.com/api/xpert/server-health/example.com/443/vless
```

### **–¢–µ–∫—É—â–∏–π —Ç–æ–ø-10:**
```bash
curl https://your-domain.com/api/xpert/top-configs
```

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- –ù–∞—Å—Ç—Ä–æ–∏–ª `XPERT_TOP_SERVERS_LIMIT=15`
- –°–ª–µ–¥–∏—Ç –∑–∞ —Ç–æ–ø–æ–º —á–µ—Ä–µ–∑ API
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—á–µ—Ä–µ–¥—å —Å–µ—Ä–≤–µ—Ä–æ–≤

### **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ 15 –ª—É—á—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ö–ª–∏–µ–Ω—Ç –ø–∏–Ω–≥—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –í–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–π—Ç–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤

### **–í–ª–∞–¥–µ–ª–µ—Ü —Å–µ—Ä–≤–µ—Ä–∞:**
- –°–ª–µ–¥–∏—Ç –∑–∞ —Å–≤–æ–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
